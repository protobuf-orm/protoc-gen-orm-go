version: v2
inputs:
  - directory: proto
    exclude_paths:
      - proto/apptest/generated
plugins:
  - local: [go, tool, google.golang.org/protobuf/cmd/protoc-gen-go]
    out: .
    opt:
      - module=github.com/protobuf-orm/protoc-gen-orm-go
      - default_api_level=API_OPAQUE
  - local: [go, tool, google.golang.org/grpc/cmd/protoc-gen-go-grpc]
    out: .
    opt:
      - module=github.com/protobuf-orm/protoc-gen-orm-go
  - local: [go, run, github.com/protobuf-orm/protoc-gen-orm-service]
    out: ./proto
    opt:
      - namer={{.Name}}_svc.g.proto
  - local: [go, run, "."]
    out: .
    opt:
      - module=github.com/protobuf-orm/protoc-gen-orm-go
      - store.name=store.g.go
      - query.namer=query.g.go
